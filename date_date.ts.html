<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>date/date.ts - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/novlan1/t-comm" target="_blank" class="menu-item" id="repository" >Github repo</a></h2><h3>Modules</h3><ul><li><a href="module-base.html">base</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-base.html#.parseFunction">parseFunction</a></li><li data-type='method' style='display: none;'><a href="module-base.html#.flatten">flatten</a></li><li data-type='method' style='display: none;'><a href="module-base.html#.shuffle">shuffle</a></li></ul></li><li></li><li><a href="module-getAreaCode.html">getAreaCode</a></li><li><a href="module-getProvName.html">getProvName</a></li><li><a href="module-getCityName.html">getCityName</a></li><li><a href="module-getAreaName.html">getAreaName</a></li><li><a href="module-getCookie.html">getCookie</a></li><li><a href="module-setCookie.html">setCookie</a></li><li><a href="module-clearCookie.html">clearCookie</a></li><li><a href="module-clearAll.html">clearAll</a></li><li><a href="module-timeStampFormat.html">timeStampFormat</a></li><li><a href="module-dateFormat.html">dateFormat</a></li><li><a href="module-parseTime.html">parseTime</a></li><li><a href="module-getTimeAgo.html">getTimeAgo</a></li><li><a href="module-getTimeAgoOrDate.html">getTimeAgoOrDate</a></li><li><a href="module-countDownTimeStr.html">countDownTimeStr</a></li><li><a href="module-validate.html">validate</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-validate.html#.isExternal">isExternal</a></li><li data-type='method' style='display: none;'><a href="module-validate.html#.validURL">validURL</a></li><li data-type='method' style='display: none;'><a href="module-validate.html#.validLowerCase">validLowerCase</a></li><li data-type='method' style='display: none;'><a href="module-validate.html#.validUpperCase">validUpperCase</a></li><li data-type='method' style='display: none;'><a href="module-validate.html#.validAlphabets">validAlphabets</a></li><li data-type='method' style='display: none;'><a href="module-validate.html#.validEmail">validEmail</a></li><li data-type='method' style='display: none;'><a href="module-validate.html#.isString">isString</a></li><li data-type='method' style='display: none;'><a href="module-validate.html#.isArray">isArray</a></li><li data-type='method' style='display: none;'><a href="module-validate.html#.isQQNumber">isQQNumber</a></li><li data-type='method' style='display: none;'><a href="module-validate.html#.isEmail">isEmail</a></li><li data-type='method' style='display: none;'><a href="module-validate.html#.isMobile">isMobile</a></li><li data-type='method' style='display: none;'><a href="module-validate.html#.isTel">isTel</a></li><li data-type='method' style='display: none;'><a href="module-validate.html#.isIdCard">isIdCard</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#base">base</a></li><li><a href="global.html#isListAllEqual">isListAllEqual</a></li><li><a href="global.html#getKeyValuesMap">getKeyValuesMap</a></li><li><a href="global.html#markMaxAndMinOfObj">markMaxAndMinOfObj</a></li><li><a href="global.html#getPreviousRatio">getPreviousRatio</a></li><li><a href="global.html#getMaxAndMinIdx">getMaxAndMinIdx</a></li><li><a href="global.html#flattenPreData">flattenPreData</a></li><li><a href="global.html#getUnitPreviousRatio">getUnitPreviousRatio</a></li><li><a href="global.html#toHumpObj">toHumpObj</a></li><li><a href="global.html#toUnicodeAt">toUnicodeAt</a></li><li><a href="global.html#toUnicode">toUnicode</a></li><li><a href="global.html#getAccCellWidth">getAccCellWidth</a></li><li><a href="global.html#mergeMultiCanvasPic">mergeMultiCanvasPic</a></li><li><a href="global.html#createCanvasTable">createCanvasTable</a></li><li><a href="global.html#getAreaData">getAreaData</a></li><li><a href="global.html#getAllAreaData">getAllAreaData</a></li><li><a href="global.html#uploadCOSFile">uploadCOSFile</a></li><li><a href="global.html#removeCss">removeCss</a></li><li><a href="global.html#getMonthDay">getMonthDay</a></li><li><a href="global.html#getMonthDay2">getMonthDay2</a></li><li><a href="global.html#isSameWeek">isSameWeek</a></li><li><a href="global.html#getRealUA">getRealUA</a></li><li><a href="global.html#checkUAIsIOS">checkUAIsIOS</a></li><li><a href="global.html#getEnvUAType">getEnvUAType</a></li><li><a href="global.html#loadJS">loadJS</a></li><li><a href="global.html#loadCSS">loadCSS</a></li><li><a href="global.html#saveBase64ImgToFile">saveBase64ImgToFile</a></li><li><a href="global.html#turnLocalImg2Base64">turnLocalImg2Base64</a></li><li><a href="global.html#saveRemoteImgToLocal">saveRemoteImgToLocal</a></li><li><a href="global.html#getImgMd5">getImgMd5</a></li><li><a href="global.html#startPipeline">startPipeline</a></li><li><a href="global.html#baseRequestRainbow">baseRequestRainbow</a></li><li><a href="global.html#randomNum">randomNum</a></li><li><a href="global.html#signatureGenerator">signatureGenerator</a></li><li><a href="global.html#genRainbowHeaderSignature">genRainbowHeaderSignature</a></li><li><a href="global.html#addOrUpdateRainbowKV">addOrUpdateRainbowKV</a></li><li><a href="global.html#addRainbowKV">addRainbowKV</a></li><li><a href="global.html#updateRainbowKV">updateRainbowKV</a></li><li><a href="global.html#createRainbowPublishJob">createRainbowPublishJob</a></li><li><a href="global.html#publishRainbowTask">publishRainbowTask</a></li><li><a href="global.html#closeRainbowTask">closeRainbowTask</a></li><li><a href="global.html#updateRainbowKVAndPublish">updateRainbowKVAndPublish</a></li><li><a href="global.html#fetchRainbowConfig">fetchRainbowConfig</a></li><li><a href="global.html#getBranchLifeCycle">getBranchLifeCycle</a></li><li><a href="global.html#getProjectDefaultBranch">getProjectDefaultBranch</a></li><li><a href="global.html#getBranchesByProjectName">getBranchesByProjectName</a></li><li><a href="global.html#getOneBranchDetail">getOneBranchDetail</a></li><li><a href="global.html#getOneCommitDetail">getOneCommitDetail</a></li><li><a href="global.html#createMR">createMR</a></li><li><a href="global.html#getMrList">getMrList</a></li><li><a href="global.html#getOneMrComments">getOneMrComments</a></li><li><a href="global.html#getOneProjectDetail">getOneProjectDetail</a></li><li><a href="global.html#getOneProjectBySearch">getOneProjectBySearch</a></li><li><a href="global.html#getAllProjects">getAllProjects</a></li><li><a href="global.html#getQueryObj">getQueryObj</a></li><li><a href="global.html#composeUrlQuery">composeUrlQuery</a></li><li><a href="global.html#isRegExp">isRegExp</a></li><li><a href="global.html#isDate">isDate</a></li><li><a href="global.html#isFunction">isFunction</a></li><li><a href="global.html#cached">cached</a></li><li><a href="global.html#camelize">camelize</a></li><li><a href="global.html#hyphenate">hyphenate</a></li><li><a href="global.html#capitalize">capitalize</a></li><li><a href="global.html#titleize">titleize</a></li><li><a href="global.html#extend">extend</a></li><li><a href="global.html#getThousandSeparator">getThousandSeparator</a></li><li><a href="global.html#getThousandSeparator2">getThousandSeparator2</a></li><li><a href="global.html#validate">validate</a></li><li><a href="global.html#genVersion">genVersion</a></li><li><a href="global.html#sendWxRobotMsg">sendWxRobotMsg</a></li><li><a href="global.html#sendWxRobotMarkdown">sendWxRobotMarkdown</a></li><li><a href="global.html#sendWxRobotImg">sendWxRobotImg</a></li><li><a href="global.html#sendToRobot">sendToRobot</a></li><li><a href="global.html#sendWxRobotBase64Img">sendWxRobotBase64Img</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">date/date.ts</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * 获取一个月有多少天
 *
 * new Date()第3个参数默认为1，就是每个月的1号，把它设置为0时， new Date()会返回上一个月的最后一天，然后通过getDate()方法得到天数
 * @param year 年份
 * @param month 月份
 * @returns 天数
 *
 * @example
 * ```ts
 * getMonthDay(2022, 2) // 28
 * getMonthDay(2022, 3) // 31
 * getMonthDay(2022, 4) // 30
 * ```
 */
export function getMonthDay(year, month) {
  const days = new Date(year, month, 0).getDate()
  return days
}

/**
 * 获取一个月有多少天
 *
 * 把每月的天数写在数组中，再判断时闰年还是平年确定2月分的天数
 * @param year 年份
 * @param month 月份
 * @returns 天数
 *
 * @example
 * ```ts
 * getMonthDay2(2022, 2) // 28
 * getMonthDay2(2022, 3) // 31
 * getMonthDay2(2022, 4) // 30
 * ```
 */
export function getMonthDay2(year, month) {
  const days = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]
  if (year % 4 === 0 &amp;&amp; (year % 100 !== 0 || year % 400 === 0)) {
    days[1] = 29
  }
  return days[month - 1]
}

function toMonday(dtm) {
  const dte = new Date(dtm)
  let day = dte.getDay()
  const dty = dte.getDate()
  if (day === 0) {
    day = 7
  }
  dte.setDate(dty - day + 1)
  return `${dte.getFullYear()}-${dte.getMonth()}-${dte.getDate()}`
}

/**
 * 判断两个日期是否属于同一周
 *
 * 把两个日期均转换到周一，比较转换后的两日期是否相同。
 *
 * @param date1 第1个时间戳
 * @param date2 第2个时间戳
 * @returns 是否是同一周
 * @example
 * ```ts
 * isSameWeek(1601308800000, 1601395200000) // true
   isSameWeek(1601308800000, 1601913600000) // false
 * ```
 */
export function isSameWeek(date1, date2) {
  const dt1 = new Date()
  dt1.setTime(date1)
  const dt2 = new Date()
  dt2.setTime(date2)

  const md1 = toMonday(dt1)
  const md2 = toMonday(dt2)
  return md1 === md2
}
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.11</a> on Mon Sep 26 2022 01:40:16 GMT+0000 (Coordinated Universal Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>
